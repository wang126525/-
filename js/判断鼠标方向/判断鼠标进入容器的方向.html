<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.10 (454267)"/><meta name="altitude" content="20.12836074829102"/><meta name="author" content="43647262@qq.com"/><meta name="created" content="2017-03-08 17:13:56 +0000"/><meta name="latitude" content="31.3740710593516"/><meta name="longitude" content="121.491990438398"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2017-03-08 17:15:10 +0000"/><title>判断鼠标进入容器的方向</title></head><body><div><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">Math.atan2(y,x)<br style=" padding: 0px;"/><br/>注意：该函数的参数顺序，第一个参数是y坐标，第二个参数是x坐标，这与我们平常的写法(x, y)恰好相反。
</p><div><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">返回值为Number类型。返回从x轴正方向通过逆时针旋转到达坐标点(x, y)所经过的角度(单位为弧度)，返回值介于 [-π, π] 之间。
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">atan2(x,y)：返回-PI 到 PI 之间的值，是从 X 轴正向逆时针旋转到点 (x,y) 时经过的角度。
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"><span style=" padding: 0px; color: rgb(255, 0, 0);">(初步理解成从X 轴最左边开始算角度，逆时针旋转经过的角度)</span></p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"><img src="%E5%88%A4%E6%96%AD%E9%BC%A0%E6%A0%87%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E7%9A%84%E6%96%B9%E5%90%91.resources/803E989F-0820-494F-84B0-A35C3A0D0A29.png" height="433" width="388"/><br style=" padding: 0px;"/><br/>1=(π/180)弧度 = 0.0174533弧度<br style=" padding: 0px;"/><br/>1弧度=57°17′45″
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">45°=(π/4)弧度 = 0.7853982弧度
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">90°= (π/2)弧度 = 1.5707964弧度(rad)
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">135°= (3π/4)弧度 = 2.3561946弧度(rad)<br style=" padding: 0px;"/><br/>180°= π弧度 = 3.1415927弧度(rad)<br style=" padding: 0px;"/><br/>225°= 5π/4 = 3.9269909弧度(rad)<br style=" padding: 0px;"/><br/>270°= 6π/4 = 4.7123891弧度(rad)<br style=" padding: 0px;"/><br/>315°= 7π/4 = 5.4977873弧度(rad) <br style=" padding: 0px;"/><br/>360°= 2π = 6.2831855弧度(rad)
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);">-45°= -π/4 = -0.7853982弧度(rad)<br style=" padding: 0px;"/><br/>-90°= -π/2 = -1.5707964弧度(rad)
</p><p style="padding: 0px 0px 0px 10px; text-indent: 0px; font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 22px; background: rgb(8, 187, 241); color: rgb(255, 255, 255);"><strong style=" padding: 0px;">原理</strong>：以div容器的中心点为圆心。对比（宽和高）的值，如取最小的高度值来作为圆的直径画一个圆（如图下）。将圆划分四个象限[ϖ/4，3π/4)，[3π/4，5π/4），[5π/4，7π/4)，[-π/4，π/4)；鼠标进入容器时的atan2(y,x)值分别在容器的下，右，上，左。
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"> 
</p><div style=" padding: 5px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot; !important; font-size: 12px !important; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style=" padding: 0px; background-color: rgb(245, 245, 245);"><span style="padding: 0px 5px 0px 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><a style=" padding: 0px; color: rgb(100, 102, 179); text-decoration: underline; background-color: rgb(245, 245, 245) !important; border: none !important;" title="复制代码"><img src="%E5%88%A4%E6%96%AD%E9%BC%A0%E6%A0%87%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E7%9A%84%E6%96%B9%E5%90%91.resources/8909AF2E-D0D7-4DCF-A002-235D349A3ECA.gif" height="20" width="20"/></a></span></div><pre style=" padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;">$("#wrap").bind("mouseenter mouseleave",<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">function</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">(e){
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> oWidth = $(<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">this</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">).width();
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> oheight = $(<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">this</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">).height();

        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">//</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">得到进入时的坐标角度</span>
        <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> posX = (e.pageX - <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">this</span>.offsetLeft - (oWidth/2)) * (oWidth &gt; oheight ? (oheight/oWidth) : 1<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">);
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> posY = (e.pageY -<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">this</span>.offsetTop -(oheight/2))* (oheight &gt; oWidth ? (oWidth/oheight) : 1<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">);

        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">//</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">direction的值为“0,1,2,3”分别对应着“上，右，下，左”</span>
        <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> direction = Math.round(((Math.atan2(posY,posX) * (180/Math.PI) + 180)/90)+3)%4<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">; 
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">//</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);"> console.log(posX);</span>
        <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> eventType =<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);"> e.type;<br style=" padding: 0px;"/><br/>　　　　  <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> id = <a href="http://e.target.id">e.target.id</a>;
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> dirName = <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">new</span> Array('上方','右侧','下方','左侧'<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">);
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">var</span> aPos = [{left:"210px",top:"-280px"},{left:"410px",top:"80px"},{left:"210px",top:"280px"},{left:"0px",top:"80px"<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">}];
        </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">if</span>(eventType == "mouseenter"<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">){
            </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">//</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);"> console.log(dirName[direction]+'进入');<br style=" padding: 0px;"/><br/>　　　　　　　 <span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">$("#log").append(id+"触发了onmouseenter事件");</span></span>
            $(".text").find("p").css(aPos[direction]).stop(<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">true</span>,<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">true</span>).animate({opacity:"1",left:"210px",top:"80px"},300<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">)
        }</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 255);">else</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">{
            </span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);">//</span><span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 128, 0);"> // console.log(dirName[direction]+'离开');</span>
            $(".text").find("p").animate(aPos[direction],300<span style="padding: 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important; color: rgb(0, 0, 0);">);<br style=" padding: 0px;"/><br/>　　　　　　　$("#log").append(id+"触发了onmouseleave事件&lt;br/&gt;");
        }
    })<br style=" padding: 0px;"/><br/><br/></span>
</pre><div style=" padding: 0px; background-color: rgb(245, 245, 245);"><span style="padding: 0px 5px 0px 0px; font-family: &quot;Courier New&quot; !important; font-size: 12px !important;"><a style=" padding: 0px; color: rgb(100, 102, 179); text-decoration: underline; background-color: rgb(245, 245, 245) !important; border: none !important;" title="复制代码"><img src="%E5%88%A4%E6%96%AD%E9%BC%A0%E6%A0%87%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E7%9A%84%E6%96%B9%E5%90%91.resources/8909AF2E-D0D7-4DCF-A002-235D349A3ECA.gif" height="20" width="20"/></a></span></div></div><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"> 
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"> <img src="%E5%88%A4%E6%96%AD%E9%BC%A0%E6%A0%87%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E7%9A%84%E6%96%B9%E5%90%91.resources/875B0B8A-53EF-4CC9-B938-2F29F11339B7.jpg" height="448" width="668"/>
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"> 
</p><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"><span style=" padding: 0px; color: rgb(255, 0, 0);">代码：var posX = (e.pageX - this.offsetLeft - (oWidth/2)) * (oWidth &gt; oheight ? (oheight/oWidth) : 1);</span> <br style=" padding: 0px;"/><br/>计算x坐标值时，如果点原来的x坐标的绝对值大于圆的半径值，则按 height/Width 这个比例进行缩小，使得到的点的位置在容器的边界位置所对应的象限区间里。 y 坐标的计算也是一样。
</p></div><p style=" padding: 0px; text-indent: 0px; color: rgb(57, 57, 57); font-family: verdana, &quot;ms song&quot;, Arial, Helvetica, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(250, 247, 239);"><span style=" padding: 0px; color: rgb(255, 0, 0);">代码：var direction = Math.round(((Math.atan2(posY,posX) * (180/Math.PI) + 180)/90)+3)%4;</span><br style=" padding: 0px;"/><br/>((Math.atan2(y, x) * (180 / Math.PI)将点的坐标对应的弧度值换算成角度度数值，只是为了使得到的0,1,2,3能够与习惯性的上，右，下，左的位置对照，如果不加上180，得到的0,1,2,3就会分别对应下，右，上，左。<br style=" padding: 0px;"/><br/>除以90，再取四舍五入值，是一个很精妙的用法，使得可以以45°为分界线。
</p></div><div><br/></div></body></html>